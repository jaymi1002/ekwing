!(function(t) { function e(r) { if (n[r]) return n[r].exports; var o = n[r] = {exports: {}, id: r, loaded: !1}; return t[r].call(o.exports, o, o.exports, e), o.loaded = !0, o.exports; } var n = {}; return e.m = t, e.c = n, e.p = '', e(0); }([function(t, e, n) { t.exports = n(7); }, function(t, e, n) { 'use strict'; function r() {} function o(t) { try { return t.then; } catch (t) { return m = t, g; } } function i(t, e) { try { return t(e); } catch (t) { return m = t, g; } } function a(t, e, n) { try { t(e, n); } catch (t) { return m = t, g; } } function s(t) { if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new'); if (typeof t !== 'function') throw new TypeError("Promise constructor's argument is not a function"); this._40 = 0, this._65 = 0, this._55 = null, this._72 = null, t !== r && v(t, this); } function u(t, e, n) { return new t.constructor(function(o, i) { var a = new s(r); a.then(o, i), l(t, new p(e, n, a)); }); } function l(t, e) { for (;t._65 === 3;)t = t._55; return s._37 && s._37(t), t._65 === 0 ? t._40 === 0 ? (t._40 = 1, void (t._72 = e)) : t._40 === 1 ? (t._40 = 2, void (t._72 = [t._72, e])) : void t._72.push(e) : void c(t, e); } function c(t, e) { y(function() { var n = t._65 === 1 ? e.onFulfilled : e.onRejected; if (n === null) return void (t._65 === 1 ? f(e.promise, t._55) : d(e.promise, t._55)); var r = i(n, t._55); r === g ? d(e.promise, m) : f(e.promise, r); }); } function f(t, e) { if (e === t) return d(t, new TypeError('A promise cannot be resolved with itself.')); if (e && (typeof e === 'object' || typeof e === 'function')) { var n = o(e); if (n === g) return d(t, m); if (n === t.then && e instanceof s) return t._65 = 3, t._55 = e, void h(t); if (typeof n === 'function') return void v(n.bind(e), t); }t._65 = 1, t._55 = e, h(t); } function d(t, e) { t._65 = 2, t._55 = e, s._87 && s._87(t, e), h(t); } function h(t) { if (t._40 === 1 && (l(t, t._72), t._72 = null), t._40 === 2) { for (var e = 0; e < t._72.length; e++)l(t, t._72[e]); t._72 = null; } } function p(t, e, n) { this.onFulfilled = typeof t === 'function' ? t : null, this.onRejected = typeof e === 'function' ? e : null, this.promise = n; } function v(t, e) { var n = !1, r = a(t, function(t) { n || (n = !0, f(e, t)); }, function(t) { n || (n = !0, d(e, t)); }); n || r !== g || (n = !0, d(e, m)); } var y = n(3), m = null, g = {}; t.exports = s, s._37 = null, s._87 = null, s._61 = r, s.prototype.then = function(t, e) { if (this.constructor !== s) return u(this, t, e); var n = new s(r); return l(this, new p(t, e, n)), n; }; }, function(t, e) { 'use strict'; function n() { for (var t = [], e = '0123456789abcdef', n = 0; n < 36; n++)t[n] = e.substr(Math.floor(16 * Math.random()), 1); return t[14] = '4', t[19] = e.substr(3 & t[19] | 8, 1), t[8] = t[13] = t[18] = t[23] = '-', t.join(''); } function r(t) { var e = new RegExp('/[^/]*\\.js$'); if (document.currentScript) return document.currentScript.src.replace(e, '/') || ''; for (var n = document.scripts, r = n.length; r > 0; r--) if (n[r - 1].src.indexOf(t) > -1) return n[r - 1].src.replace(e, '/') || ''; return ''; } function o(t) { a = t; } function i() { if (a && console) { var t; (t = console).log.apply(t, arguments); } }Object.defineProperty(e, '__esModule', {value: !0}), e.uuid = n, e.curPath = r, e.setDebug = o, e.log = i; var a = !1; }, function(t, e) { (function(e) { 'use strict'; function n(t) { s.length || (a(), u = !0), s[s.length] = t; } function r() { for (;l < s.length;) { var t = l; if (l += 1, s[t].call(), l > c) { for (var e = 0, n = s.length - l; e < n; e++)s[e] = s[e + l]; s.length -= l, l = 0; } }s.length = 0, l = 0, u = !1; } function o(t) { var e = 1, n = new d(t), r = document.createTextNode(''); return n.observe(r, {characterData: !0}), function() { e = -e, r.data = e; }; } function i(t) { return function() { function e() { clearTimeout(n), clearInterval(r), t(); } var n = setTimeout(e, 0), r = setInterval(e, 50); }; }t.exports = n; var a, s = [], u = !1, l = 0, c = 1024, f = typeof e !== 'undefined' ? e : self, d = f.MutationObserver || f.WebKitMutationObserver; a = typeof d === 'function' ? o(r) : i(r), n.requestFlush = a, n.makeRequestCallFromTimer = i; }).call(e, (function() { return this; }())); }, function(t, e) { 'use strict'; Object.defineProperty(e, '__esModule', {value: !0}); var n = {NO_TEXT: {code: 1001, msg: 'no text'}, NO_VOICE: {code: 1002, msg: 'no voice'}, NO_NETWORK: {code: 1003, msg: 'NET: ERR_INTERNET_DISCONNECTED'}, SERVER_ERROR: {code: 1004, msg: 'service error'}, NOT_RECORD: {code: 1005, msg: 'not record'}, TOO_LONG: {code: 1006, msg: 'text too long'}, SCORE_ERROR: {code: 1007, msg: '打分系数范围0.6~1.9'}, MODE_ERROR: {code: 1008, msg: '评测模式为 A B C D E G H'}, AUDIO_ERROR: {code: 1009, msg: '可选值为:  mp3 , opus , amrnb'}, ADDR_ERROR: {code: 1010, msg: 'addr is required'}, NOT_HTTPS: {code: 1011, msg: '无法打开麦克风,请使用https协议. Only secure origins are allowed (see: https://goo.gl/Y0ZkNV).'}, NOT_ALLOWED_MIC: {code: 1012, msg: '用户拒绝访问麦克风'}, NOT_SUPPORTED: {code: 1013, msg: '浏览器不支持录音'}, NOT_FOUND_MIC: {code: 1014, msg: '找不到麦克风设备'}, OTHER_RECORD_ERROR: {code: 1015, msg: '无法打开麦克风'}, BLOB_ERROR: {code: 1016, msg: '获取音频失败'}, PARSE_ERROR: {code: 1017, msg: '解析失败'}}; e.default = n; }, function(t, e, n) { 'use strict'; function r() { if (u.length) throw u.shift(); } function o(t) { var e; e = s.length ? s.pop() : new i(), e.task = t, a(e); } function i() { this.task = null; } var a = n(3), s = [], u = [], l = a.makeRequestCallFromTimer(r); t.exports = o, i.prototype.call = function() { try { this.task.call(); } catch (t) { o.onerror ? o.onerror(t) : (u.push(t), l()); } finally { this.task = null, s[s.length] = this; } }; }, function(t, e, n) { /**
	 * @license License
	 * Copyright [云知声] [http://www.unisound.com]
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * @author Created by felix on 17-4-17.
	 * @email   307253927@qq.com
	 */
    'use strict'; function r(t) { return t && t.__esModule ? t : {default: t}; } function o(t, e, n) { return '//' + (t || h) + (e ? ':' + e : '') + '/eval/' + n; } function i(t) { var e = this; if (!t.userId) throw new Error('userId is required!'); t.host = t.host || h, t.port = t.port || v, t.hostCn = t.hostCn || p, t.portCn = t.portCn || v; var n = '2p6hvzwliw2uv5alv5fggwl523llph47jmttwmqo'; Object.defineProperties(this, {appKey: {writable: !1, value: n}, version: {writable: !1, value: '1.1.3'}}); var r = 1, i = void 0, s = 'opus', l = 'A', g = o(t.host, t.port, s), b = t.autoStop, w = void 0, E = void 0, R = void 0, _ = void 0, S = void 0, O = void 0, T = void 0, A = void 0, C = void 0, x = void 0, B = void 0, P = void 0, F = function(t) { if (b) { typeof b === 'boolean' ? b = 3 : b >= 1 && b <= 6 || (b = 3); var n = void 0; n = !t || t.length < 60 ? 1e3 * b : t.length / 60 * b * 1e3, (0, a.log)('%c' + n + 'ms%c后自动停止录音', 'color:#0000EE', ''), T = setTimeout(function() { e.stop(); }, n); } }; this.id = (0, a.uuid)(), this.setServerAddr = function(t) { t || (setTimeout(function() { e.onError(c.default.ADDR_ERROR); }, 18), P = !0), g = t; }, this.setAudioFormat = function(n) { m.indexOf(n) === -1 ? (setTimeout(function() { e.onError(c.default.AUDIO_ERROR); }, 18), P = !0) : (s = n, e.setServerAddr(o(t.host, t.port, s))); }, this.setScoreCoefficient = function(t) { t < 0.6 || t > 1.9 ? (setTimeout(function() { e.onError(c.default.SCORE_ERROR); }, 18), P = !0) : r = t; }, this.setMode = function(t) { y.indexOf(t) === -1 ? (setTimeout(function() { e.onError(c.default.MODE_ERROR); }, 18), P = !0) : l = t; }, this.evaluate = function(u, f, d) { var h = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 'en'; if (!u) return e.onError(c.default.NO_TEXT); if (!f) return e.onError(c.default.NO_VOICE); var p = g; w = (0, a.uuid)(); var v = {'session-id': w, appkey: n, 'score-coefficient': r, 'device-id': i || t.userId, 'X-OS': i || 'HTML5', 'Wrap-Create-Time': !0}; if (h === 'cn') { if (typeof u === 'string') try { u = JSON.parse(u); } catch (t) { u = {DisplayText: u}; }v['X-EngineType'] = 'oral.zh_CH', u.Language = 'cn', u = JSON.stringify(u), p = o(t.hostCn, t.portCn, s); } var y = new FormData(); y.append('text', u), y.append('mode', d || l), y.append('voice', f), fetch(p, {method: 'POST', headers: v, body: y}).then(function(t) { return t.status === 200 ? t.text() : void t.text().then(function(t) { (0, a.log)('service ERROR: ', t), e.onError({code: c.default.SERVER_ERROR.code, msg: c.default.SERVER_ERROR.msg + ' ' + (t || '')}); }); }).then(function(t) { if (t) try { A = JSON.parse(t.replace(/"CreateTime":(\d+)/, '"CreateTime":"$1"')), e.onResult(A.EngineResult); } catch (t) { e.onError(c.default.PARSE_ERROR); } }).catch(function(t) { (0, a.log)(t), e.onError({code: c.default.SERVER_ERROR.code, msg: 'request failed: ' + JSON.stringify(t)}); }); }, this.start = function(n, r) { var o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 'en'; n ? (n = n.replace(/ {2,}/g, ' ').replace(/^ +|\t| +$/g, ''), n ? n.length > 16e3 ? e.onError(c.default.TOO_LONG) : R || (A = null, R = !0, C = n, x = r || 'A', B = o || 'en', w = (0, a.uuid)(), O = !1, e.useFlash ? FlashRecorder.start() : (E.start(), e.onStart()), t.autoStop && (clearTimeout(T), F(n))) : e.onError(c.default.NO_TEXT)) : e.onError(c.default.NO_TEXT); }, this.stop = function() { if (R) { clearTimeout(T), R = !1; var t = e.useFlash ? FlashRecorder : E, n = new Promise(function(n, r) { t.getBlob(function(t) { if (t.size) { _ = t, O = !0, e.evaluate(C, t, x, B); var o = {text: C, mode: x || l, sessionId: w, voice: t}; e.onStop({text: C, mode: x || l, sessionId: w, voice: t}), n(o); } else (0, a.log)('录音失败，请重试！'), e.onError(c.default.BLOB_ERROR), r(c.default.BLOB_ERROR); }, function(t) { (0, a.log)(t), e.onError(c.default.BLOB_ERROR), r(c.default.BLOB_ERROR); }); }); return t.stop(), n; } return e.onError(c.default.NOT_RECORD), Promise.reject(c.default.NOT_RECORD); }, this.getBlob = function() { return _; }, this.getSoundUrl = function() { if (A) { var t = A, e = t.SessionId, n = t.CreateTime, r = t.Area; return 'http://edu.hivoice.cn:9088/WebAudio-1.0-SNAPSHOT/audio/play/' + e + '/' + n + '/' + r; } }, this.getResultUrl = function() { if (A) { var t = A, e = t.SessionId, n = t.CreateTime, r = t.Area; return 'http://edu.hivoice.cn:9088/WebAudio-1.0-SNAPSHOT/result/' + e + '/' + n + '/' + r; } }, this.playLocal = function() { var t = !1; if (O) { S || (S = document.getElementById('uns-oral-eval-sdk-audio'), S || (S = document.createElement('audio'), S.setAttribute('id', 'uns-oral-eval-sdk-audio'), S.addEventListener('playing', function() { S.isPlaing = !0, S.sdk.onPlayLocal(); }), S.addEventListener('ended', function() { S.isPlaing = !1, S.sdk.onStopPlayLocal(); }), S.addEventListener('error', function() { S.isPlaing = !1, t = !0; }), document.body.appendChild(S))), S.isPlaing && (S.pause(), S.isPlaing = !1, S.sdk && S.sdk.onStopPlayLocal()); var n = e.getSoundUrl(); n && (S.src !== n && (S.src = n), S.sdk = e, setTimeout(function() { t ? S.sdk.onStopPlayLocal() : (S.isPlaing = !0, S.play()); }, 100)); } }, this.stopPlayLocal = function() { if (S) { try { S.pause(), S.currentTime = 0; } catch (t) { (0, a.log)(t); }S.isPlaing = !1, e.onStopPlayLocal(); } }, this.onReady = function() { (0, a.log)('onReady'); }, this.onStart = function() { (0, a.log)('onStart'); }, this.onStop = function(t) { (0, a.log)('onStop', t); }, this.onError = function(t) { (0, a.log)(t); }, this.onResult = function(t) { (0, a.log)(t); }, this.onPlayLocal = function() { (0, a.log)('onPlayLocal'); }, this.onStopPlayLocal = function() { (0, a.log)('onStopPlayLocal'); }, (0, a.setDebug)(t.debug), this.setScoreCoefficient(t.scoreCoefficient || r), this.setMode(t.mode || l), this.setAudioFormat(t.audioFormat || s), (0, a.log)('sdk_version:', this.version), P || (t.useSelfAudio ? ((0, a.log)('SDK(File mode) is Ready'), setTimeout(function() { e.onReady(); }, 18)) : f && !t.useFlash ? (this.useFlash = !1, E = new u.default({rootPath: d, success: function() { (0, a.log)('SDK(H5 mode) is Ready'), setTimeout(function() { e.onReady(); }, 18); }, error: function(t) { R = !1, setTimeout(function() { e.onError(t); }, 18); }})) : (this.useFlash = !0, FlashRecorder.init({success: function() { (0, a.log)('SDK(Flash mode) is Ready'), setTimeout(function() { e.onReady(); }); }, cancel: function() { setTimeout(function() { e.onError(c.default.NOT_ALLOWED_MIC); }); }, start: function() { e.onStart(); }, stop: function(t, n) { e.onStop(t, n); }, swfSrc: d}))); }Object.defineProperty(e, '__esModule', {value: !0}), e.default = i, n(19); var a = n(2), s = n(10), u = r(s); n(9); var l = n(4), c = r(l); window.Promise || (window.Promise = n(12)), navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia; var f = !0; location.protocol === 'http:' && location.hostname !== 'localhost' ? f = !1 : navigator.getUserMedia || navigator.mediaDevices && navigator.mediaDevices.getUserMedia || (f = !1); var d = (0, a.curPath)('uns_oral_eval_js_sdk'), h = 'edu.hivoice.cn', p = 'cn-edu.hivoice.cn', v = '', y = ['A', 'B', 'C', 'D', 'E', 'G', 'H', 'enstar'], m = ['mp3', 'opus', 'amrnb', 'pcm'];
}, function(t, e, n) { 'use strict'; function r(t) { return t && t.__esModule ? t : {default: t}; } var o = n(6), i = r(o); !(function(t) { t && t.module && t.module.exports ? (t.module.exports = i.default, t.module.exports.default = i.default) : window.EvalSDK = i.default; }(void 0)); }, function(t, e) { 'use strict'; function n(t, e) { if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function'); } var r = (function() { function t(t, e) { for (var n = 0; n < e.length; n++) { var r = e[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, 'value' in r && (r.writable = !0), Object.defineProperty(t, r.key, r); } } return function(e, n, r) { return n && t(e.prototype, n), r && t(e, r), e; }; }()), o = (function() { function t(e, r, o, i) { if (n(this, t), !e || !r || !o) throw new Error('Invalid settings specified for the resampler.'); this.resampler = null, this.fromSampleRate = e, this.toSampleRate = r, this.channels = o || 0, this.inputBufferSize = i, this.initialize(); } return r(t, [{key: 'initialize', value: function() { this.fromSampleRate == this.toSampleRate ? (this.resampler = function(t) { return t; }, this.ratioWeight = 1) : (this.fromSampleRate < this.toSampleRate ? (this.linearInterpolation(), this.lastWeight = 1) : (this.multiTap(), this.tailExists = !1, this.lastWeight = 0), this.initializeBuffers(), this.ratioWeight = this.fromSampleRate / this.toSampleRate); }}, {key: 'bufferSlice', value: function(t) { try { return this.outputBuffer.subarray(0, t); } catch (e) { try { return this.outputBuffer.length = t, this.outputBuffer; } catch (e) { return this.outputBuffer.slice(0, t); } } }}, {key: 'initializeBuffers', value: function() { this.outputBufferSize = Math.ceil(this.inputBufferSize * this.toSampleRate / this.fromSampleRate / this.channels * 1.0000004768371582) + this.channels + this.channels; try { this.outputBuffer = new Float32Array(this.outputBufferSize), this.lastOutput = new Float32Array(this.channels); } catch (t) { this.outputBuffer = [], this.lastOutput = []; } }}, {key: 'linearInterpolation', value: function() { var t = this; this.resampler = function(e) { var n = e.length, r = t.channels, o = void 0, i = void 0, a = void 0, s = void 0, u = void 0, l = void 0, c = void 0, f = void 0, d = void 0; if (n % r !== 0) throw new Error('Buffer was of incorrect sample length.'); if (n <= 0) return []; for (o = t.outputBufferSize, i = t.ratioWeight, a = t.lastWeight, s = 0, u = 0, l = 0, c = 0, f = t.outputBuffer; a < 1; a += i) for (u = a % 1, s = 1 - u, t.lastWeight = a % 1, d = 0; d < t.channels; ++d)f[c++] = t.lastOutput[d] * s + e[d] * u; for (a -= 1, n -= r, l = Math.floor(a) * r; c < o && l < n;) { for (u = a % 1, s = 1 - u, d = 0; d < t.channels; ++d)f[c++] = e[l + (d > 0 ? d : 0)] * s + e[l + (r + d)] * u; a += i, l = Math.floor(a) * r; } for (d = 0; d < r; ++d)t.lastOutput[d] = e[l++]; return t.bufferSlice(c); }; }}, {key: 'multiTap', value: function() { var t = this; this.resampler = function(e) { var n = e.length, r = void 0, o = void 0, i = t.channels, a = void 0, s = void 0, u = void 0, l = void 0, c = void 0, f = void 0, d = void 0, h = void 0, p = void 0; if (n % i !== 0) throw new Error('Buffer was of incorrect sample length.'); if (n <= 0) return []; for (r = t.outputBufferSize, o = [], a = t.ratioWeight, s = 0, l = 0, c = 0, f = !t.tailExists, t.tailExists = !1, d = t.outputBuffer, h = 0, p = 0, u = 0; u < i; ++u)o[u] = 0; do { if (f) for (s = a, u = 0; u < i; ++u)o[u] = 0; else { for (s = t.lastWeight, u = 0; u < i; ++u)o[u] = t.lastOutput[u]; f = !0; } for (;s > 0 && l < n;) { if (c = 1 + l - p, !(s >= c)) { for (u = 0; u < i; ++u)o[u] += e[l + (u > 0 ? ' + ' + u : '')] * s; p += s, s = 0; break; } for (u = 0; u < i; ++u)o[u] += e[l++] * c; p = l, s -= c; } if (s !== 0) { for (t.lastWeight = s, u = 0; u < i; ++u)t.lastOutput[u] = o[u]; t.tailExists = !0; break; } for (u = 0; u < i; ++u)d[h++] = o[u] / a; } while (l < n && h < r);return t.bufferSlice(h); }; }}, {key: 'resample', value: function(t) { return this.fromSampleRate == this.toSampleRate ? this.ratioWeight = 1 : (this.fromSampleRate < this.toSampleRate ? this.lastWeight = 1 : (this.tailExists = !1, this.lastWeight = 0), this.initializeBuffers(), this.ratioWeight = this.fromSampleRate / this.toSampleRate), this.resampler(t); }}]), t; }()); t.exports = o; }, function(t, e, n) { 'use strict'; n(11); var r = n(2), o = void 0, i = {init: function(t) { var e = this; t = t || {}, t.audioprocess = t.audioprocess || function() {}, t.swfSrc = t.swfSrc || './', this.options = t, t.flashContainer || this._setupFlashContainer(), this.worker = new Worker(this.options.swfSrc + 'opus_encoder.js?v=0.0.8'), this.worker.postMessage({cmd: 'init'}), this.worker.onmessage = function(t) { switch (t.data.cmd) { case 'end':(0, r.log)('opus:', t.data.buf); var n = new Blob(t.data.buf); o(n), (0, r.log)('opus大小：%c' + Math.round(n.size / 1024) + 'KB', 'color:#0000EE'); break; case 'error':e._error = t.data.buf; } }, this.loadFlash(); }, start: function() { return this._error = null, this.flashInterface().record(); }, stop: function() { return this.flashInterface().stopRecord(); }, getData: function() { return this.flashInterface().audioData(); }, getBlob: function(t, e) { this._error ? e(this._error) : o = t; }, getWavData: function() { return this.flashInterface().wavData(); }, playSound: function() { this.flashInterface().playSound(); }, stopSound: function() { this.flashInterface().stopSound(); }, recordingDuration: function() { this.flashInterface().recordingDuration(); }, flashInterface: function() { return this.swfObject ? this.swfObject.record ? this.swfObject : this.swfObject.children[3].record ? this.swfObject.children[3] : void 0 : null; }, initialized: function() { this._initialized = !0, this._flashBlockCatched && this._defaultOnHideFlash(), this.options.initialized && this.options.initialized(); }, clearFlash: function() { var t = this.options.flashContainer, e = t.children[0]; e && t.removeChild(e); }, loadFlash: function() { var t = this; this._defaultOnShowFlash(), this.clearFlash(); var e = document.createElement('div'); e.setAttribute('id', 'recorderFlashObject'), this.options.flashContainer.appendChild(e), swfobject.embedSWF(this.options.swfSrc + 'recorder.swf', 'recorderFlashObject', 250, 170, '11.1.0', this.options.swfSrc + 'expressInstall.swf', {}, {allowscriptaccess: 'always'}, void 0, function(e) { e.success ? t.swfObject = e.ref : t._showFlashRequiredDialog(); }); }, _setupFlashContainer: function() { this.options.flashContainer = document.createElement('div'), this.options.flashContainer.setAttribute('id', 'recorderFlashContainer'), this.options.flashContainer.setAttribute('style', 'position: fixed; left: -9999px; width: 250px; height: 170px; border-radius: 5px 5px; overflow: hidden;'), document.body.appendChild(this.options.flashContainer); }, _defaultOnShowFlash: function(t) { var e = this, n = this.options.flashContainer; n.style.left = (window.innerWidth || document.body.offsetWidth) / 2 - 115 + 'px', n.style.top = (window.innerHeight || document.body.offsetHeight) / 2 - 90 + 'px', t && setTimeout(function() { e.flashInterface().showFlash(); }, 0); }, _defaultOnHideFlash: function() { var t = this.options.flashContainer; t.style.left = '-9999px'; }, _showFlashRequiredDialog: function() { var t = this.options.flashContainer; t.innerHTML = "<p>Adobe Flash Player 11.1.0 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>", t.style.color = 'white', t.style.backgroundColor = '#fff', t.style.textAlign = 'center', this._defaultOnShowFlash(); }, triggerEvent: function(t, e, n) { switch (t) { case 'pcmData':return this.worker.postMessage({cmd: 'encode', buf: new Float32Array(e)}), i.options.audioprocess(e, n); case 'initialized':var r = i.options.success; return i._defaultOnHideFlash(), r && r(), i.initialized(); case 'recordingStart':var o = i.options.start; return o && o(), i._defaultOnHideFlash(); case 'recordingStop':this.worker.postMessage({cmd: 'finish'}); var a = i.options.stop; return a && a(e, n); case 'recordingCancel':i._defaultOnHideFlash(); var s = i.options.cancel; return s && s(), i.loadFlash(); case 'showFlash':i._defaultOnShowFlash(e); break; case 'hideFlash':return i._defaultOnHideFlash(); } }}; window.FlashRecorder = i; }, function(t, e, n) { 'use strict'; function r(t) { return t && t.__esModule ? t : {default: t}; } var o = Object.assign || function(t) { for (var e = 1; e < arguments.length; e++) { var n = arguments[e]; for (var r in n)Object.prototype.hasOwnProperty.call(n, r) && (t[r] = n[r]); } return t; }, i = n(2), a = n(4), s = r(a), u = n(8), l = r(u), c = {init: function() { window.AudioContext = window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext, void 0 === navigator.mediaDevices && (navigator.mediaDevices = {}), void 0 === navigator.mediaDevices.getUserMedia && (navigator.mediaDevices.getUserMedia = function(t) { return navigator.getUserMedia ? new Promise(function(e, n) { navigator.getUserMedia.call(navigator, t, e, n); }) : Promise.reject(new Error('getUserMedia is not implemented in this browser')); }); }}; t.exports = function(t) { var e = this; t = t || {}, t.sampleRate = t.sampleRate || 16e3, t.bitRate = t.bitRate || 32, t.rootPath = t.rootPath || '', c.init(), navigator.mediaDevices.getUserMedia({audio: !0}).then(function(n) { var r = new AudioContext(), o = r.createMediaStreamSource(n), a = r.createScriptProcessor(4096, 1, 1), s = void 0, u = void 0, c = new l.default(r.sampleRate, t.sampleRate, 1, 4096); (0, i.log)('sampleRate：', r.sampleRate), a.onaudioprocess = function(t) { var e = t.inputBuffer.getChannelData(0); (0, i.log)('process pcm length：', e.length), f.postMessage({cmd: 'encode', buf: c.resample(e)}); }; var f = new Worker(t.rootPath + 'opus_encoder.js?v=0.0.8'); f.onmessage = function(e) { switch (e.data.cmd) { case 'process':(0, i.log)('opus buf', e.data.buf && e.data.buf.length); break; case 'init':t.success && t.success(); break; case 'end':if (s) { var n = new Blob(e.data.buf); s(n), (0, i.log)('opus大小：%c' + Math.round(n.size / 1024) + 'KB', 'color:#0000EE'); } break; case 'error':(0, i.log)('错误信息：' + e.data.error), u && u(e.data.error); break; default:(0, i.log)('未知错误信息：' + e.data); } }, e.start = function() { a && o && (o.connect(a), a.connect(r.destination), (0, i.log)('recording...')); }, e.stop = function() { a && o && (o.disconnect(), a.disconnect(), (0, i.log)('stop recording')); }, e.getBlob = function(t, e) { s = t, u = e, f.postMessage({cmd: 'finish'}); }, f.postMessage({cmd: 'init', config: {sampleRate: t.sampleRate, bitRate: t.bitRate}}); }).catch(function(e) { var n = void 0; switch (e.name) { case 'NOT_SUPPORTED_ERROR':case 'NotSupportedError':e.message.toLowerCase().indexOf('only secure origins are allowed') > -1 ? n = s.default.NOT_HTTPS : (n = s.default.NOT_SUPPORTED, n.msg = n.msg + ': ' + e.message); break; case 'PermissionDeniedError':case 'PERMISSION_DENIED':case 'SecurityError':case 'NotAllowedError':n = s.default.NOT_ALLOWED_MIC; break; case 'MANDATORY_UNSATISFIED_ERROR':case 'NotFoundError':case 'NotReadableError':case 'MandatoryUnsatisfiedError':n = s.default.NOT_FOUND_MIC; break; default:n = o({}, s.default.OTHER_RECORD_ERROR, {msg: '无法打开麦克风 Error: ' + e.toString()}); }t.error && t.error(n); }); }; }, function(t, e) { 'use strict'; var n = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? function(t) { return typeof t; } : function(t) { return t && typeof Symbol === 'function' && t.constructor === Symbol && t !== Symbol.prototype ? 'symbol' : typeof t; }, r = (function() { function t() { if (!G && document.getElementsByTagName('body')[0]) { try { var t, e = b('span'); e.style.display = 'none', t = U.getElementsByTagName('body')[0].appendChild(e), t.parentNode.removeChild(t), t = null, e = null; } catch (t) { return; }G = !0; for (var n = z.length, r = 0; r < n; r++)z[r](); } } function e(t) { G ? t() : z[z.length] = t; } function o(t) { if (n(L.addEventListener) != F)L.addEventListener('load', t, !1); else if (n(U.addEventListener) != F)U.addEventListener('load', t, !1); else if (n(L.attachEvent) != F)E(L, 'onload', t); else if (typeof L.onload === 'function') { var e = L.onload; L.onload = function() { e(), t(); }; } else L.onload = t; } function i() { var t = U.getElementsByTagName('body')[0], e = b(N); e.setAttribute('style', 'visibility: hidden;'), e.setAttribute('type', j); var r = t.appendChild(e); if (r) { var o = 0; !(function i() { if (n(r.GetVariable) != F) try { var s = r.GetVariable('$version'); s && (s = s.split(' ')[1].split(','), Z.pv = [w(s[0]), w(s[1]), w(s[2])]); } catch (t) { Z.pv = [8, 0, 0]; } else if (o < 10) return o++, void setTimeout(i, 10); t.removeChild(e), r = null, a(); }()); } else a(); } function a() { var t = V.length; if (t > 0) for (var e = 0; e < t; e++) { var r = V[e].id, o = V[e].callbackFn, i = {success: !1, id: r}; if (Z.pv[0] > 0) { var a = g(r); if (a) if (!R(V[e].swfVersion) || Z.wk && Z.wk < 312) if (V[e].expressInstall && u()) { var f = {}; f.data = V[e].expressInstall, f.width = a.getAttribute('width') || '0', f.height = a.getAttribute('height') || '0', a.getAttribute('class') && (f.styleclass = a.getAttribute('class')), a.getAttribute('align') && (f.align = a.getAttribute('align')); for (var d = {}, h = a.getElementsByTagName('param'), p = h.length, v = 0; v < p; v++)h[v].getAttribute('name').toLowerCase() != 'movie' && (d[h[v].getAttribute('name')] = h[v].getAttribute('value')); l(f, d, r, o); } else c(a), o && o(i); else S(r, !0), o && (i.success = !0, i.ref = s(r), i.id = r, o(i)); } else if (S(r, !0), o) { var y = s(r); y && n(y.SetVariable) != F && (i.success = !0, i.ref = y, i.id = y.id), o(i); } } } function s(t) { var e = null, r = g(t); return r && r.nodeName.toUpperCase() === 'OBJECT' && (e = n(r.SetVariable) !== F ? r : r.getElementsByTagName(N)[0] || r), e; } function u() { return !X && R('6.0.65') && (Z.win || Z.mac) && !(Z.wk && Z.wk < 312); } function l(t, e, r, o) { var i = g(r); if (r = m(r), X = !0, C = o || null, x = {success: !1, id: r}, i) { i.nodeName.toUpperCase() == 'OBJECT' ? (T = f(i), A = null) : (T = i, A = r), t.id = k, (n(t.width) == F || !/%$/.test(t.width) && w(t.width) < 310) && (t.width = '310'), (n(t.height) == F || !/%$/.test(t.height) && w(t.height) < 137) && (t.height = '137'); var a = Z.ie ? 'ActiveX' : 'PlugIn', s = 'MMredirectURL=' + encodeURIComponent(L.location.toString().replace(/&/g, '%26')) + '&MMplayerType=' + a + '&MMdoctitle=' + encodeURIComponent(U.title.slice(0, 47) + ' - Flash Player Installation'); if (n(e.flashvars) != F ? e.flashvars += '&' + s : e.flashvars = s, Z.ie && i.readyState != 4) { var u = b('div'); r += 'SWFObjectNew', u.setAttribute('id', r), i.parentNode.insertBefore(u, i), i.style.display = 'none', v(i); }h(t, e, r); } } function c(t) { if (Z.ie && t.readyState != 4) { t.style.display = 'none'; var e = b('div'); t.parentNode.insertBefore(e, t), e.parentNode.replaceChild(f(t), e), v(t); } else t.parentNode.replaceChild(f(t), t); } function f(t) { var e = b('div'); if (Z.win && Z.ie)e.innerHTML = t.innerHTML; else { var n = t.getElementsByTagName(N)[0]; if (n) { var r = n.childNodes; if (r) for (var o = r.length, i = 0; i < o; i++)r[i].nodeType == 1 && r[i].nodeName == 'PARAM' || r[i].nodeType == 8 || e.appendChild(r[i].cloneNode(!0)); } } return e; } function d(t, e) { var n = b('div'); return n.innerHTML = "<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='" + t + "'>" + e + '</object>', n.firstChild; } function h(t, e, r) { var o, i = g(r); if (r = m(r), Z.wk && Z.wk < 312) return o; if (i) { var a, s, u, l = b(Z.ie ? 'div' : N); n(t.id) == F && (t.id = r); for (u in e)e.hasOwnProperty(u) && u.toLowerCase() !== 'movie' && p(l, u, e[u]); Z.ie && (l = d(t.data, l.innerHTML)); for (a in t)t.hasOwnProperty(a) && (s = a.toLowerCase(), s === 'styleclass' ? l.setAttribute('class', t[a]) : s !== 'classid' && s !== 'data' && l.setAttribute(a, t[a])); Z.ie ? $[$.length] = t.id : (l.setAttribute('type', j), l.setAttribute('data', t.data)), i.parentNode.replaceChild(l, i), o = l; } return o; } function p(t, e, n) { var r = b('param'); r.setAttribute('name', e), r.setAttribute('value', n), t.appendChild(r); } function v(t) { var e = g(t); e && e.nodeName.toUpperCase() == 'OBJECT' && (Z.ie ? (e.style.display = 'none', (function t() { if (e.readyState == 4) { for (var n in e) typeof e[n] === 'function' && (e[n] = null); e.parentNode.removeChild(e); } else setTimeout(t, 10); }())) : e.parentNode.removeChild(e)); } function y(t) { return t && t.nodeType && t.nodeType === 1; } function m(t) { return y(t) ? t.id : t; } function g(t) { if (y(t)) return t; var e = null; try { e = U.getElementById(t); } catch (t) {} return e; } function b(t) { return U.createElement(t); } function w(t) { return parseInt(t, 10); } function E(t, e, n) { t.attachEvent(e, n), q[q.length] = [t, e, n]; } function R(t) { t += ''; var e = Z.pv, n = t.split('.'); return n[0] = w(n[0]), n[1] = w(n[1]) || 0, n[2] = w(n[2]) || 0, e[0] > n[0] || e[0] == n[0] && e[1] > n[1] || e[0] == n[0] && e[1] == n[1] && e[2] >= n[2]; } function _(t, e, r, o) { var i = U.getElementsByTagName('head')[0]; if (i) { var a = typeof r === 'string' ? r : 'screen'; if (o && (B = null, P = null), !B || P != a) { var s = b('style'); s.setAttribute('type', 'text/css'), s.setAttribute('media', a), B = i.appendChild(s), Z.ie && n(U.styleSheets) != F && U.styleSheets.length > 0 && (B = U.styleSheets[U.styleSheets.length - 1]), P = a; }B && (n(B.addRule) != F ? B.addRule(t, e) : n(U.createTextNode) != F && B.appendChild(U.createTextNode(t + ' {' + e + '}'))); } } function S(t, e) { if (K) { var n = e ? 'visible' : 'hidden', r = g(t); G && r ? r.style.visibility = n : typeof t === 'string' && _('#' + t, 'visibility:' + n); } } function O(t) { var e = /[\\\"<>\.;]/, r = e.exec(t) != null; return r && (typeof encodeURIComponent === 'undefined' ? 'undefined' : n(encodeURIComponent)) != F ? encodeURIComponent(t) : t; } var T, A, C, x, B, P, F = 'undefined', N = 'object', D = 'Shockwave Flash', I = 'ShockwaveFlash.ShockwaveFlash', j = 'application/x-shockwave-flash', k = 'SWFObjectExprInst', M = 'onreadystatechange', L = window, U = document, W = navigator, H = !1, z = [], V = [], $ = [], q = [], G = !1, X = !1, K = !0, J = !1, Z = (function() { var t = n(U.getElementById) != F && n(U.getElementsByTagName) != F && n(U.createElement) != F, e = W.userAgent.toLowerCase(), r = W.platform.toLowerCase(), o = r ? /win/.test(r) : /win/.test(e), i = r ? /mac/.test(r) : /mac/.test(e), a = !!/webkit/.test(e) && parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, '$1')), s = W.appName === 'Microsoft Internet Explorer', u = [0, 0, 0], l = null; if (n(W.plugins) != F && n(W.plugins[D]) == N)l = W.plugins[D].description, l && n(W.mimeTypes) != F && W.mimeTypes[j] && W.mimeTypes[j].enabledPlugin && (H = !0, s = !1, l = l.replace(/^.*\s+(\S+\s+\S+$)/, '$1'), u[0] = w(l.replace(/^(.*)\..*$/, '$1')), u[1] = w(l.replace(/^.*\.(.*)\s.*$/, '$1')), u[2] = /[a-zA-Z]/.test(l) ? w(l.replace(/^.*[a-zA-Z]+(.*)$/, '$1')) : 0); else if (n(L.ActiveXObject) != F) try { var c = new ActiveXObject(I); c && (l = c.GetVariable('$version'), l && (s = !0, l = l.split(' ')[1].split(','), u = [w(l[0]), w(l[1]), w(l[2])])); } catch (t) {} return {w3: t, pv: u, wk: a, ie: s, win: o, mac: i}; }()); (function() { Z.w3 && ((n(U.readyState) != F && (U.readyState === 'complete' || U.readyState === 'interactive') || n(U.readyState) == F && (U.getElementsByTagName('body')[0] || U.body)) && t(), G || (n(U.addEventListener) != F && U.addEventListener('DOMContentLoaded', t, !1), Z.ie && (U.attachEvent(M, function e() { U.readyState == 'complete' && (U.detachEvent(M, e), t()); }), L == top && !(function e() { if (!G) { try { U.documentElement.doScroll('left'); } catch (t) { return void setTimeout(e, 0); }t(); } }())), Z.wk && !(function e() { if (!G) return /loaded|complete/.test(U.readyState) ? void t() : void setTimeout(e, 0); }()))); })(); z[0] = function() { H ? i() : a(); }; (function() { Z.ie && window.attachEvent('onunload', function() { for (var t = q.length, e = 0; e < t; e++)q[e][0].detachEvent(q[e][1], q[e][2]); for (var n = $.length, o = 0; o < n; o++)v($[o]); for (var i in Z)Z[i] = null; Z = null; for (var a in r)r[a] = null; r = null; }); })(); return {registerObject: function(t, e, n, r) { if (Z.w3 && t && e) { var o = {}; o.id = t, o.swfVersion = e, o.expressInstall = n, o.callbackFn = r, V[V.length] = o, S(t, !1); } else r && r({success: !1, id: t}); }, getObjectById: function(t) { if (Z.w3) return s(t); }, embedSWF: function(t, r, o, i, a, s, c, f, d, p) { var v = m(r), y = {success: !1, id: v}; Z.w3 && !(Z.wk && Z.wk < 312) && t && r && o && i && a ? (S(v, !1), e(function() { o += '', i += ''; var e = {}; if (d && (typeof d === 'undefined' ? 'undefined' : n(d)) === N) for (var m in d)e[m] = d[m]; e.data = t, e.width = o, e.height = i; var g = {}; if (f && (typeof f === 'undefined' ? 'undefined' : n(f)) === N) for (var b in f)g[b] = f[b]; if (c && (typeof c === 'undefined' ? 'undefined' : n(c)) === N) for (var w in c) if (c.hasOwnProperty(w)) { var E = J ? encodeURIComponent(w) : w, _ = J ? encodeURIComponent(c[w]) : c[w]; n(g.flashvars) != F ? g.flashvars += '&' + E + '=' + _ : g.flashvars = E + '=' + _; } if (R(a)) { var O = h(e, g, r); e.id == v && S(v, !0), y.success = !0, y.ref = O, y.id = O.id; } else { if (s && u()) return e.data = s, void l(e, g, r, p); S(v, !0); }p && p(y); })) : p && p(y); }, switchOffAutoHideShow: function() { K = !1; }, enableUriEncoding: function(t) { J = (typeof t === 'undefined' ? 'undefined' : n(t)) === F || t; }, ua: Z, getFlashPlayerVersion: function() { return {major: Z.pv[0], minor: Z.pv[1], release: Z.pv[2]}; }, hasFlashPlayerVersion: R, createSWF: function(t, e, n) { return Z.w3 ? h(t, e, n) : void 0; }, showExpressInstall: function(t, e, n, r) { Z.w3 && u() && l(t, e, n, r); }, removeSWF: function(t) { Z.w3 && v(t); }, createCSS: function(t, e, n, r) { Z.w3 && _(t, e, n, r); }, addDomLoadEvent: e, addLoadEvent: o, getQueryParamValue: function(t) { var e = U.location.search || U.location.hash; if (e) { if (/\?/.test(e) && (e = e.split('?')[1]), t == null) return O(e); for (var n = e.split('&'), r = 0; r < n.length; r++) if (n[r].substring(0, n[r].indexOf('=')) == t) return O(n[r].substring(n[r].indexOf('=') + 1)); } return ''; }, expressInstallCallback: function() { if (X) { var t = g(k); t && T && (t.parentNode.replaceChild(T, t), A && (S(A, !0), Z.ie && (T.style.display = 'block')), C && C(x)), X = !1; } }, version: '2.3'}; }()); window.swfobject = r; }, function(t, e, n) { 'use strict'; t.exports = n(16); }, function(t, e, n) { 'use strict'; var r = n(1); t.exports = r, r.prototype.done = function(t, e) { var n = arguments.length ? this.then.apply(this, arguments) : this; n.then(null, function(t) { setTimeout(function() { throw t; }, 0); }); }; }, function(t, e, n) { 'use strict'; function r(t) { var e = new o(o._61); return e._65 = 1, e._55 = t, e; } var o = n(1); t.exports = o; var i = r(!0), a = r(!1), s = r(null), u = r(void 0), l = r(0), c = r(''); o.resolve = function(t) { if (t instanceof o) return t; if (t === null) return s; if (void 0 === t) return u; if (t === !0) return i; if (t === !1) return a; if (t === 0) return l; if (t === '') return c; if (typeof t === 'object' || typeof t === 'function') try { var e = t.then; if (typeof e === 'function') return new o(e.bind(t)); } catch (t) { return new o(function(e, n) { n(t); }); } return r(t); }, o.all = function(t) { var e = Array.prototype.slice.call(t); return new o(function(t, n) { function r(a, s) { if (s && (typeof s === 'object' || typeof s === 'function')) { if (s instanceof o && s.then === o.prototype.then) { for (;s._65 === 3;)s = s._55; return s._65 === 1 ? r(a, s._55) : (s._65 === 2 && n(s._55), void s.then(function(t) { r(a, t); }, n)); } var u = s.then; if (typeof u === 'function') { var l = new o(u.bind(s)); return void l.then(function(t) { r(a, t); }, n); } }e[a] = s, --i === 0 && t(e); } if (e.length === 0) return t([]); for (var i = e.length, a = 0; a < e.length; a++)r(a, e[a]); }); }, o.reject = function(t) { return new o(function(e, n) { n(t); }); }, o.race = function(t) { return new o(function(e, n) { t.forEach(function(t) { o.resolve(t).then(e, n); }); }); }, o.prototype.catch = function(t) { return this.then(null, t); }; }, function(t, e, n) { 'use strict'; var r = n(1); t.exports = r, r.prototype.finally = function(t) { return this.then(function(e) { return r.resolve(t()).then(function() { return e; }); }, function(e) { return r.resolve(t()).then(function() { throw e; }); }); }; }, function(t, e, n) { 'use strict'; t.exports = n(1), n(13), n(15), n(14), n(17), n(18); }, function(t, e, n) { 'use strict'; function r(t, e) { for (var n = [], r = 0; r < e; r++)n.push('a' + r); var o = ['return function (' + n.join(',') + ') {', 'var self = this;', 'return new Promise(function (rs, rj) {', 'var res = fn.call(', ['self'].concat(n).concat([s]).join(','), ');', 'if (res &&', '(typeof res === "object" || typeof res === "function") &&', 'typeof res.then === "function"', ') {rs(res);}', '});', '};'].join(''); return Function(['Promise', 'fn'], o)(i, t); } function o(t) { for (var e = Math.max(t.length - 1, 3), n = [], r = 0; r < e; r++)n.push('a' + r); var o = ['return function (' + n.join(',') + ') {', 'var self = this;', 'var args;', 'var argLength = arguments.length;', 'if (arguments.length > ' + e + ') {', 'args = new Array(arguments.length + 1);', 'for (var i = 0; i < arguments.length; i++) {', 'args[i] = arguments[i];', '}', '}', 'return new Promise(function (rs, rj) {', 'var cb = ' + s + ';', 'var res;', 'switch (argLength) {', n.concat(['extra']).map(function(t, e) { return 'case ' + e + ':res = fn.call(' + ['self'].concat(n.slice(0, e)).concat('cb').join(',') + ');break;'; }).join(''), 'default:', 'args[argLength] = cb;', 'res = fn.apply(self, args);', '}', 'if (res &&', '(typeof res === "object" || typeof res === "function") &&', 'typeof res.then === "function"', ') {rs(res);}', '});', '};'].join(''); return Function(['Promise', 'fn'], o)(i, t); } var i = n(1), a = n(5); t.exports = i, i.denodeify = function(t, e) { return typeof e === 'number' && e !== 1 / 0 ? r(t, e) : o(t); }; var s = 'function (err, res) {if (err) { rj(err); } else { rs(res); }}'; i.nodeify = function(t) { return function() { var e = Array.prototype.slice.call(arguments), n = typeof e[e.length - 1] === 'function' ? e.pop() : null, r = this; try { return t.apply(this, arguments).nodeify(n, r); } catch (t) { if (n === null || typeof n === 'undefined') return new i(function(e, n) { n(t); }); a(function() { n.call(r, t); }); } }; }, i.prototype.nodeify = function(t, e) { return typeof t !== 'function' ? this : void this.then(function(n) { a(function() { t.call(e, null, n); }); }, function(n) { a(function() { t.call(e, n); }); }); }; }, function(t, e, n) { 'use strict'; var r = n(1); t.exports = r, r.enableSynchronous = function() { r.prototype.isPending = function() { return this.getState() == 0; }, r.prototype.isFulfilled = function() { return this.getState() == 1; }, r.prototype.isRejected = function() { return this.getState() == 2; }, r.prototype.getValue = function() { if (this._65 === 3) return this._55.getValue(); if (!this.isFulfilled()) throw new Error('Cannot get a value of an unfulfilled promise.'); return this._55; }, r.prototype.getReason = function() { if (this._65 === 3) return this._55.getReason(); if (!this.isRejected()) throw new Error('Cannot get a rejection reason of a non-rejected promise.'); return this._55; }, r.prototype.getState = function() { return this._65 === 3 ? this._55.getState() : this._65 === -1 || this._65 === -2 ? 0 : this._65; }; }, r.disableSynchronous = function() { r.prototype.isPending = void 0, r.prototype.isFulfilled = void 0, r.prototype.isRejected = void 0, r.prototype.getValue = void 0, r.prototype.getReason = void 0, r.prototype.getState = void 0; }; }, function(t, e) {
    !(function(t) {
        'use strict'; function e(t) { if (typeof t !== 'string' && (t = String(t)), /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)) throw new TypeError('Invalid character in header field name'); return t.toLowerCase(); } function n(t) { return typeof t !== 'string' && (t = String(t)), t; } function r(t) { var e = {next: function() { var e = t.shift(); return {done: void 0 === e, value: e}; }}; return m.iterable && (e[Symbol.iterator] = function() { return e; }), e; } function o(t) { this.map = {}, t instanceof o ? t.forEach(function(t, e) { this.append(e, t); }, this) : Array.isArray(t) ? t.forEach(function(t) { this.append(t[0], t[1]); }, this) : t && Object.getOwnPropertyNames(t).forEach(function(e) { this.append(e, t[e]); }, this); } function i(t) { return t.bodyUsed ? Promise.reject(new TypeError('Already read')) : void (t.bodyUsed = !0); } function a(t) { return new Promise(function(e, n) { t.onload = function() { e(t.result); }, t.onerror = function() { n(t.error); }; }); } function s(t) { var e = new FileReader(), n = a(e); return e.readAsArrayBuffer(t), n; } function u(t) { var e = new FileReader(), n = a(e); return e.readAsText(t), n; } function l(t) { for (var e = new Uint8Array(t), n = new Array(e.length), r = 0; r < e.length; r++)n[r] = String.fromCharCode(e[r]); return n.join(''); } function c(t) { if (t.slice) return t.slice(0); var e = new Uint8Array(t.byteLength); return e.set(new Uint8Array(t)), e.buffer; } function f() {
            return this.bodyUsed = !1, this._initBody = function(t) {
                if (this._bodyInit = t, t) {
                    if (typeof t === 'string') this._bodyText = t; else if (m.blob && Blob.prototype.isPrototypeOf(t)) this._bodyBlob = t; else if (m.formData && FormData.prototype.isPrototypeOf(t)) this._bodyFormData = t; else if (m.searchParams && URLSearchParams.prototype.isPrototypeOf(t)) this._bodyText = t.toString(); else if (m.arrayBuffer && m.blob && b(t)) this._bodyArrayBuffer = c(t.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer]); else {
                        if (!m.arrayBuffer || !ArrayBuffer.prototype.isPrototypeOf(t) && !w(t)) throw new Error('unsupported BodyInit type');
                        this._bodyArrayBuffer = c(t);
                    }
                } else this._bodyText = ''; this.headers.get('content-type') || (typeof t === 'string' ? this.headers.set('content-type', 'text/plain;charset=UTF-8') : this._bodyBlob && this._bodyBlob.type ? this.headers.set('content-type', this._bodyBlob.type) : m.searchParams && URLSearchParams.prototype.isPrototypeOf(t) && this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8'));
            }, m.blob && (this.blob = function() { var t = i(this); if (t) return t; if (this._bodyBlob) return Promise.resolve(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer])); if (this._bodyFormData) throw new Error('could not read FormData body as blob'); return Promise.resolve(new Blob([this._bodyText])); }, this.arrayBuffer = function() { return this._bodyArrayBuffer ? i(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(s); }), this.text = function() { var t = i(this); if (t) return t; if (this._bodyBlob) return u(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(l(this._bodyArrayBuffer)); if (this._bodyFormData) throw new Error('could not read FormData body as text'); return Promise.resolve(this._bodyText); }, m.formData && (this.formData = function() { return this.text().then(p); }), this.json = function() { return this.text().then(JSON.parse); }, this;
        } function d(t) { var e = t.toUpperCase(); return E.indexOf(e) > -1 ? e : t; } function h(t, e) { e = e || {}; var n = e.body; if (t instanceof h) { if (t.bodyUsed) throw new TypeError('Already read'); this.url = t.url, this.credentials = t.credentials, e.headers || (this.headers = new o(t.headers)), this.method = t.method, this.mode = t.mode, n || t._bodyInit == null || (n = t._bodyInit, t.bodyUsed = !0); } else this.url = String(t); if (this.credentials = e.credentials || this.credentials || 'omit', !e.headers && this.headers || (this.headers = new o(e.headers)), this.method = d(e.method || this.method || 'GET'), this.mode = e.mode || this.mode || null, this.referrer = null, (this.method === 'GET' || this.method === 'HEAD') && n) throw new TypeError('Body not allowed for GET or HEAD requests'); this._initBody(n); } function p(t) { var e = new FormData(); return t.trim().split('&').forEach(function(t) { if (t) { var n = t.split('='), r = n.shift().replace(/\+/g, ' '), o = n.join('=').replace(/\+/g, ' '); e.append(decodeURIComponent(r), decodeURIComponent(o)); } }), e; } function v(t) { var e = new o(), n = t.replace(/\r?\n[\t ]+/g, ' '); return n.split(/\r?\n/).forEach(function(t) { var n = t.split(':'), r = n.shift().trim(); if (r) { var o = n.join(':').trim(); e.append(r, o); } }), e; } function y(t, e) { e || (e = {}), this.type = 'default', this.status = void 0 === e.status ? 200 : e.status, this.ok = this.status >= 200 && this.status < 300, this.statusText = 'statusText' in e ? e.statusText : 'OK', this.headers = new o(e.headers), this.url = e.url || '', this._initBody(t); } if (!t.fetch) { var m = {searchParams: 'URLSearchParams' in t, iterable: 'Symbol' in t && 'iterator' in Symbol, blob: 'FileReader' in t && 'Blob' in t && (function() { try { return new Blob(), !0; } catch (t) { return !1; } }()), formData: 'FormData' in t, arrayBuffer: 'ArrayBuffer' in t}; if (m.arrayBuffer) var g = ['[object Int8Array]', '[object Uint8Array]', '[object Uint8ClampedArray]', '[object Int16Array]', '[object Uint16Array]', '[object Int32Array]', '[object Uint32Array]', '[object Float32Array]', '[object Float64Array]'], b = function(t) { return t && DataView.prototype.isPrototypeOf(t); }, w = ArrayBuffer.isView || function(t) { return t && g.indexOf(Object.prototype.toString.call(t)) > -1; }; o.prototype.append = function(t, r) { t = e(t), r = n(r); var o = this.map[t]; this.map[t] = o ? o + ',' + r : r; }, o.prototype.delete = function(t) { delete this.map[e(t)]; }, o.prototype.get = function(t) { return t = e(t), this.has(t) ? this.map[t] : null; }, o.prototype.has = function(t) { return this.map.hasOwnProperty(e(t)); }, o.prototype.set = function(t, r) { this.map[e(t)] = n(r); }, o.prototype.forEach = function(t, e) { for (var n in this.map) this.map.hasOwnProperty(n) && t.call(e, this.map[n], n, this); }, o.prototype.keys = function() { var t = []; return this.forEach(function(e, n) { t.push(n); }), r(t); }, o.prototype.values = function() { var t = []; return this.forEach(function(e) { t.push(e); }), r(t); }, o.prototype.entries = function() { var t = []; return this.forEach(function(e, n) { t.push([n, e]); }), r(t); }, m.iterable && (o.prototype[Symbol.iterator] = o.prototype.entries); var E = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']; h.prototype.clone = function() { return new h(this, {body: this._bodyInit}); }, f.call(h.prototype), f.call(y.prototype), y.prototype.clone = function() { return new y(this._bodyInit, {status: this.status, statusText: this.statusText, headers: new o(this.headers), url: this.url}); }, y.error = function() { var t = new y(null, {status: 0, statusText: ''}); return t.type = 'error', t; }; var R = [301, 302, 303, 307, 308]; y.redirect = function(t, e) { if (R.indexOf(e) === -1) throw new RangeError('Invalid status code'); return new y(null, {status: e, headers: {location: t}}); }, t.Headers = o, t.Request = h, t.Response = y, t.fetch = function(t, e) { return new Promise(function(n, r) { var o = new h(t, e), i = new XMLHttpRequest(); i.onload = function() { var t = {status: i.status, statusText: i.statusText, headers: v(i.getAllResponseHeaders() || '')}; t.url = 'responseURL' in i ? i.responseURL : t.headers.get('X-Request-URL'); var e = 'response' in i ? i.response : i.responseText; n(new y(e, t)); }, i.onerror = function() { r(new TypeError('Network request failed')); }, i.ontimeout = function() { r(new TypeError('Network request failed')); }, i.open(o.method, o.url, !0), o.credentials === 'include' ? i.withCredentials = !0 : o.credentials === 'omit' && (i.withCredentials = !1), 'responseType' in i && m.blob && (i.responseType = 'blob'), o.headers.forEach(function(t, e) { i.setRequestHeader(e, t); }), i.send(typeof o._bodyInit === 'undefined' ? null : o._bodyInit); }); }, t.fetch.polyfill = !0; }
    }(typeof self !== 'undefined' ? self : this));
}]));
// # sourceMappingURL=uns_oral_eval_js_sdk.map
